# 輸入框（InputBox）

一個簡單的輔助文字輸入應用程式。

## 一、功能說明

- 提供單一文字方塊，方便在控制器環境下開啟觸控式鍵盤並輸入文字。
  - 需要配合輸入法（`微軟注音`、`微軟倉頡`及 `Microsoft 速成`）的「遊戲控制器」鍵盤配置使用。 
- 支援全域快速鍵，可透過該快速鍵快速喚出應用程式。
  - 需先啟動並在背景執行後，快速鍵才會生效。
- 支援 XInput 控制器（如 Xbox 控制器）操作與震動回饋。
  - 若使用非 XInput 控制器，需透過其他軟體將其模擬成 XInput 控制器。
- 依輸入狀態自動切換「鍵盤：Enter 鍵／控制器：A 鍵」的行為：
  - **文字方塊為空時**：開啟 Windows 內建的觸控式鍵盤（`TabTip.exe`）。
  - **文字方塊有文字時**：將文字複製到 Windows 剪貼簿，並在系統允許的情況下，將焦點切換回先前的前景視窗。
- 支援輸入歷程記錄。
  - 僅存在於記憶體中，每次應用程式關閉時會自動清除。
- 本應用程式支援 Windows 10 與 Windows 11 作業系統。

## 二、使用方式

### 1. 鍵盤操作

- **Ctrl** + **Alt** + **Shift** + **I**：全域快速鍵，用於顯示本應用程式。
  - 需先啟動並在背景執行後，快速鍵才會生效。
- **Enter**：
  - **文字方塊為空時**：開啟 Windows 內建的觸控式鍵盤（`TabTip.exe`）。
  - **文字方塊有文字時**：將文字複製到 Windows 剪貼簿，並在系統允許的情況下，將焦點切換回先前的前景視窗。
- **Shift** + **Enter**：換行。
- **Esc**：清除輸入。
- **方向鍵 ↑**／**↓**：瀏覽輸入歷程記錄。

### 2. 控制器操作（XInput）

- **A 鍵**：確認。
  - 功能等同鍵盤 **Enter**，可開啟觸控式鍵盤或複製文字到剪貼簿。
- **B 鍵**：清除輸入。
  - 功能等同鍵盤 **Esc**。
- **X 鍵**：刪除游標前一個字元。
  - 功能等同鍵盤 **Backspace**。 
- **方向鍵 ↑**／**↓**：瀏覽輸入歷程記錄。
- **方向鍵 ←**／**→**：移動輸入游標。
- **左搖桿**：功能等同鍵盤 **方向鍵**。
  - 用於瀏覽輸入歷程記錄或移動游標。 
- **Start 鍵**：將焦點拉回文字方塊。
- **Back 鍵**：嘗試將焦點切換回先前的前景視窗。
- **按住 LB 與 RB 不放，再按下 B 鍵**：功能等同於控制器 **Back 鍵**。
  - 避免誤觸 **Back 鍵**時意外切換回先前的前景視窗。

### 3. 設定

本應用程式的設定檔會在第一次執行時自動產生。若需要調整震動強度、視窗還原延遲等參數，請修改此檔案。

#### (1) 設定檔位置

設定檔位於使用者的應用程式資料夾中：
- **路徑**：`%AppData%\InputBox\appsettings.json`
- **快速存取方式**： 
  1. 按下 `Win + R` 開啟執行視窗。
  2. 輸入 `%AppData%\InputBox` 並按下 Enter。
  3. 將會看到 `appsettings.json` 檔案。

#### (2) 設定項目說明

可使用任何文字編輯器（如記事本、VS Code）開啟 `appsettings.json` 進行編輯。

| 分類 | 參數名稱 | 類型 | 預設值 | 說明 |
| :--- | :--- | :--- | :--- | :--- |
| **視窗操作** | `WindowRestoreDelay` | 整數（毫秒） | `50` | 還原視窗的緩衝時間（毫秒），電腦較慢者可調大此值以避免視窗全黑。 |
| | `ClipboardRetryDelay` | 整數（毫秒）  | `20` | 剪貼簿鎖定時的重試基礎間隔（毫秒）。 |
| | `TouchKeyboardDismissDelay` | 整數（毫秒） | `300` | 觸控鍵盤關閉後的緩衝時間（毫秒）。 |
| | `WindowSwitchBufferBase` | 整數（毫秒） | `150` | 切換回遊戲視窗前的基礎等待時間（毫秒）。 |
| **隨機化設定** | `InputJitterRange` | 整數（毫秒） | `50` | **[重要]** 隨機延遲範圍（毫秒）。使視窗切換的時間點具有變化性，讓切換過程更自然平滑。 |
| | `ThumbDeadzoneEnter` | 整數 | `7849` | XInput 標準值，無單位。搖桿推動觸發值。若控制器搖桿因磨損而產生偏移，可提高此值。 |
| | `ThumbDeadzoneExit` | 整數 | `7000` | XInput 標準值，無單位。搖桿回彈重置值。 |
| **操作體驗調整** | `RepeatInitialDelayFrames` | 整數（幀） | `30` | 長按方向鍵時，開始重複輸入前的延遲（幀）。 |
| | `RepeatIntervalFrames` | 整數（幀） | `5` | 長按方向鍵時的重複速度（幀），數值越小越快。 |
| | `HistoryCapacity` | 整數 | `100` | 輸入歷史記錄的最大保存筆數。 |
| **回饋** | `EnableVibration` | 布林值 | `true` | 是否啟用控制器震動回饋（`true`／`false`）。 |
| | `VibrationIntensity` | 浮點數 | `1.0` | 全域震動強度（0.0 ~ 1.0）。若覺得震動太強可改為 `0.5`。 |

> **注意**：修改設定後，請重新啟動程式以套用變更。

## 三、應用程式的設計原則

本應用程式遵循以下設計原則：
1. 不與任何遊戲或應用程式進行互動。
2. 不讀取、不修改、不注入任何第三方程式。
3. 不模擬鍵盤或滑鼠輸入。
4. 不自動貼上內容至其他視窗。
   - 僅複製至剪貼簿。
5. 不偵測或識別任何特定應用程式。
6. 僅在使用者主動操作時，開啟 Windows 內建的觸控式鍵盤（`TabTip.exe`）。
7. 本應用程式視窗預設為最上層顯示（TopMost），以確保在全螢幕或控制器操作環境下不被其他視窗遮擋。

本應用程式僅設計為一般的輔助文字輸入應用程式。

## 四、關於 Microsoft SmartScreen 與防毒軟體提示

本應用程式為第三方工具，未經 Microsoft Store 發佈，亦未以商業程式碼簽章憑證簽署。因此，在首次下載或執行時，Microsoft SmartScreen 或部分防毒軟體可能會顯示「未受信任」或相關安全性警告。

本應用程式遵循前述設計原則，是否下載、執行或使用本應用程式，請依個人需求與環境自行評估。

## 五、疑難排解 

### 1. 觸控式鍵盤不會在輸入（鍵盤 Enter／控制器 A）後自動關閉

這是 Windows 觸控式鍵盤的系統行為，本應用程式不會強制將其關閉。若要關閉觸控式鍵盤，請按一下右上角的 X 按鈕，或使用控制器的 B 鍵。

若需使用控制器 B 鍵關閉觸控式鍵盤，可將觸控式鍵盤的「鍵盤配置」設定為「遊戲控制器」。

### 2. 從 Xbox 全螢幕體驗切換回 Windows 桌面後，應用程式視窗過大

可手動縮放視窗大小（使用手指或滑鼠）。

### 3. 觸控式鍵盤不會顯示

請檢查以下設定：

Windows 設定 → 時間與語言 → 輸入 → 觸控式鍵盤 → 「顯示觸控式鍵盤」的選項。

若需讓觸控式鍵盤一律顯示，可將此選項設定為「一律」。

## 六、聲明

1. 本應用程式使用 AI 服務輔助開發、圖示生成與文件撰寫。
2. 本應用程式依賴 `TabTip.exe` 以開啟觸控式鍵盤，本應用程式建議於 Windows 10 或 Windows 11 上執行。
3. 本應用程式為非官方開發的第三方軟體，無法保證可適用於任何特定遊戲或服務。
4. 使用本應用程式所產生的任何後果，皆由使用者自行承擔。

## 七、授權條款

本專案採用 **CC0 1.0 Universal** 宣告釋出至公眾領域。  
可自由複製、修改、發布或執行本軟體，無需取得授權。  
詳細內容可參閱 [LICENSE](LICENSE) 文件。